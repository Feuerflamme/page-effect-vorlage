@use "../abstracts/" as *;

/**
 * Custom Slider CSS with CSS Scroll Snap
 * Pixel-perfect, lightweight alternative to Swiper
 */

// Base slider container
.custom-slider {
  position: relative;
  width: 100%;
  // overflow-x: hidden; // Hide content overflow
  outline: none; // Remove default focus outline

  // Focus management
  &:focus {
    // outline: 3px solid var(--acf-primary, #{$color-accent});
    // outline-offset: 2px;
  }

  &:focus-within {
    .custom-pagination {
      // box-shadow: 0 0 0 2px var(--acf-primary, #{$color-accent});
    }
  }
} // Slider track (scrollable container)
.slider-track {
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  gap: 0; // No gap between slides for full-width effect

  // Hide scrollbars completely
  scrollbar-width: none; // Firefox
  -ms-overflow-style: none; // IE/Edge

  &::-webkit-scrollbar {
    display: none; // Chrome/Safari/Opera
  }

  // Smooth scrolling on all devices
  -webkit-overflow-scrolling: touch;
}

// Individual slide
.slide {
  flex: 0 0 100%; // Full width slides
  scroll-snap-align: center;
  scroll-snap-stop: always; // Force stop at each slide
  display: flex;
  align-items: flex-end;
  justify-content: flex-end;
  position: relative;

  img {
    width: 100%;
    height: auto;
    max-width: 100%;
    display: block;
    border-radius: $border-radius;
    object-fit: cover;
  }
}

// Custom Pagination
.custom-pagination {
  position: absolute;
  bottom: -26px; // Default position - can be overridden per module
  right: 30px; // Rechts positioniert
  display: flex;
  gap: 12px;
  z-index: 999; // Erhöhter Z-Index für bessere Sichtbarkeit
  pointer-events: auto; // Stelle sicher, dass Klicks funktionieren

  .pagination-bullet {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 1px solid var(--acf-primary, #{$color-accent});
    background-color: transparent;
    cursor: pointer;
    // transition: all 0.3s ease;
    outline: none;

    &:hover {
      background-color: var(--acf-primary, #{$color-accent});
      opacity: 0.8;
      // transform: scale(1.1);
    }

    &.active {
      background-color: var(--acf-primary, #{$color-accent});
    }

    &:focus {
      // outline: 3px solid var(--acf-primary, #{$color-accent});
      // outline-offset: 2px;
      // box-shadow: 0 0 0 2px rgba(var(--acf-primary-rgb, 44, 156, 145), 0.3);
    }
  }
}

// Navigation arrows
.custom-slider {
  position: relative;
  // ...existing code...
}

.slider-nav {
  width: 46px;
  height: 76px;

  border: none;
  background-color: var(--acf-primary, #{$color-accent});
  color: $color-white;
  font-size: 1.5rem; // 24px ÷ 16 = 1.5rem
  font-weight: bold;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.9;
  transition: all 0.3s ease;

  &:hover {
    background-color: $color-accent-dark;
    // transform: scale(1.05);
  }

  &:focus {
    // outline: 3px solid $color-white;
    // outline-offset: 2px;
    // box-shadow: 0 0 0 1px var(--acf-primary, #{$color-accent});
  }

  &.slider-prev,
  &.slider-next {
    position: absolute;
    left: unset;
    top: unset;
    bottom: 10px;
    font-size: 1rem; // 16px ÷ 16 = 1rem
  }

  &.slider-prev {
    right: 54px;
    border-bottom-left-radius: $border-radius;
    border-top-left-radius: $border-radius;

    .icon {
      transform: rotate(90deg);
    }
  }

  &.slider-next {
    right: 10px;
    border-bottom-right-radius: $border-radius;
    border-top-right-radius: $border-radius;

    .icon {
      transform: rotate(270deg);
      position: relative;
      top: -1px;
    }
  }

  // Hide navigation on small screens
  @media (max-width: $bp-desktop) {
    display: none;
  }
}

// Smooth animations
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

// Animation für Slides deaktiviert (Bugfix Hero)
.custom-slider-initialized {
  .slide {
    animation: none;
  }
}

// Screen reader only content
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

// Accessibility improvements
@media (prefers-reduced-motion: reduce) {
  .slider-track {
    scroll-behavior: auto;
  }

  .pagination-bullet,
  .slider-nav {
    transition: none;
  }

  .slide {
    animation: none;
  }
}
